 .file-drop-zone {
   border: 2px dashed #ccc;
   border-radius: 8px;
   padding: 20px;
   text-align: center;
   font-size: 1rem;
   color: #666;
   cursor: pointer;
   transition: border-color 0.3s ease, background-color 0.3s ease;
 }
 .file-drop-zone.dragover {
   border-color: #007BFF;
   background-color: #f0f8ff;
 }
#uploadNameInput {
  width: 100%;
  box-sizing: border-box;
  font-size: 1rem;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 10px;
  margin-bottom: 10px;
}
.upload-buttons {
  display: flex;
  justify-content: flex-end;
}
.fillblank-container {
    margin: 20px 0;
    width: 100%;
    justify-content: center;
}
.fillblank-input {
    width: 100%;
    padding: 12px 16px;
    font-size: 1.1rem;
    border: 2px solid #ccc;
    border-radius: 8px;
    transition: border-color 0.3s ease;
}
.fillblank-input:focus {
    outline: none;
    border-color: #007BFF;
}

.fillblank-input.correct {
    border-color: #18AE79;
}
.fillblank-input.incorrect {
    border-color: #cc4e00;
}

/* New Progress Display Styles */
.progress-container {
    margin-bottom: 20px;
  }
  .progress-counts {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
  }
  .progress-count {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 1rem;
  }
  .count-number {
    font-weight: bold;
  }
  .progress-bars {
    position: relative;
    width: 100%;
    height: 4px;
    background-color: #f4f4f4;
    border-radius: 4px;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  }
  .progress-bar {
    position: absolute;
    top: 0;
    bottom: 0;
    transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* More dynamic easing */
    border-radius: 3px;
    box-shadow: 0 0 6px rgba(255, 255, 255, 0.3);
    overflow: hidden;
    background-size: 200% 100%; /* For shimmer */
    animation: shimmer 3s linear infinite; /* Continuous subtle challenge shimmer */
  }

  .progress-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
    opacity: 0.6;
    pointer-events: none;
  }

  .progress-bar.animating {
    animation: pulse 0.6s ease-out, shimmer 1s linear infinite;
  }

  .progress-bar.correct-animating {
    animation: correctPulse 0.8s ease-out, glow 1s ease-out, bounce 0.8s ease-out;
  }

  .progress-bar.wrong-animating {
    animation: wrongPulse 0.8s ease-out, shake 0.5s ease-in-out;
  }

  .correct-bar {
    background: linear-gradient(90deg, #18AE79 0%, #4CAF50 25%, #66BB6A 50%, #4CAF50 75%, #18AE79 100%);
    background-size: 300% 100%;
    animation: lavaFlow 6s ease-in-out infinite;
    left: 0;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .correct-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
    pointer-events: none;
  }

  .wrong-bar {
    background: linear-gradient(90deg, #cc4e00 0%, #ff5722 25%, #ff8a65 50%, #ff5722 75%, #cc4e00 100%);
    background-size: 300% 100%;
    animation: lavaFlow 6s ease-in-out infinite;
    right: 0;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .wrong-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
    pointer-events: none;
  }
  /* Import Google Fonts for a premium look */
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@400;600&display=swap');
  
  @font-face {
      font-family: 'YuWeiShuFaYunMoFanTi';
      src: url('fonts/YuWeiShuFaYunMoFanTi.woff2') format('woff2');
      font-weight: 900;
      font-style: normal;
      font-display: swap;
      unicode-range: U+4E00-9FFF, U+3400-4DBF, U+20000-2A6DF, U+2A700-2B73F, U+2B740-2B81F, U+2B820-2CEAF, U+2CEB0-2EBEF, U+2F800-2FA1F;
  }
  
  
  /* Base Styles */
  body {
      color: #2D3436;
      margin: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background-color: white;
  }
  
  p {
      margin: 0;
  }
  
  /* Start Screen Styling */
  .start-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: white;
      gap: 12px;
      position: relative;
      transition: all 0.4s ease;
  }
  
  .start-title {
      font-family: "Playfair Display", "YuWeiShuFaYunMoFanTi", "source-han-serif-tc", "Noto Serif TC", "PMingLiU", "SimSun", serif;
      color: #1A1A1A;
      font-size: 4rem;
      letter-spacing: 3px;
      font-weight: 600;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #2D3436 0%, #1A1A1A 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
  }
  
  /* Button Styles */
          .back-button {
              font-size: 1rem;
              color: #262b34;  /* Deep slate blue */
              border: none;  /* Vibrant blue-purple */
              cursor: pointer;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              text-align: center;
              position: absolute;
              top: 31px;
              left: 30px;
              background-color: transparent;
          }
  
          .back-button:hover, .back-button.selected {
              color: #92a0ba;
          }
  
          .select-button {
              padding: 12px 24px;
              font-size: 1rem;
              background-color: #ffffff50;
              color: #000;  /* Deep slate blue */
              border: 2px solid #000;  /* Vibrant blue-purple */
              border-radius: 12px;
              cursor: pointer;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              min-width: 120px;
              text-align: center;
              box-shadow: 0 2px 4px rgba(0,0,0,0.03);
              font-weight: 500;
              position: relative;
              overflow: hidden;
          }
  
          .select-button::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(120deg, transparent, rgba(107, 92, 212, 0.05), transparent);
              transition: all 0.6s;
          }
  
          .select-button:hover::before {
              left: 100%;
          }
  
          .select-button:hover, .select-button.selected {
              background-color: #000;  /* Vibrant blue-purple */
              color: #FFFFFF;
              transform: translateY(-2px);
              box-shadow: 0 4px 12px rgba(107, 92, 212, 0.2);
          }
  
          .start-button {
              padding: 14px 30px;
              font-size: 1.2rem;
              background-color: #000;  /* Deep blue-purple */
              color: #FFFFFF;
              border: none;
              border-radius: 30px;
              letter-spacing: 3px;
              margin-top: 20px;
              cursor: pointer;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              font-weight: 500;
              box-shadow: 0 4px 12px rgba(74, 58, 222, 0.15);
              position: relative;
              overflow: hidden;
          }
  
          .start-button::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(120deg, transparent, rgba(255,255,255,0.1), transparent);
              transition: all 0.6s;
          }
  
          .start-button:hover::before {
              left: 100%;
          }
  
          .start-button:hover {
              background-color: #111;  /* Slightly darker blue-purple */
              transform: translateY(-2px);
              box-shadow: 0 6px 16px rgba(58, 42, 206, 0.25);
          }
  
          /* Subtle active/focus states */
          .select-button:active, .start-button:active {
              transform: scale(0.98);
          }
  
  
  .quiz-title {
      font-family: "Playfair Display", "YuWeiShuFaYunMoFanTi", "source-han-serif-tc", "Noto Serif TC", "PMingLiU", "SimSun", serif;
      color: #1A1A1A;
      font-size: 1.6rem;
      font-weight: 600;
  }
  
  /* Progress Bar Styling */
  .progress {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
  }
  
  .progress-item {
      display: flex;
      align-items: center;
      padding: 8px 20px;
      border-radius: 16px;
      background-color: #F8F9FA;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .progress-number-orange {
      font-weight: bold;
      margin-right: 5px;
      color: #FF9F43;
  }
  
  .progress-number-green {
      font-weight: bold;
      color: #28C76F;
      margin-left: 5px;
  }
  
  /* Quiz progress bar */
  #progress-bar-wrapper {
      width: 100%;
      background-color: rgba(235, 235, 235, 0.4);
      height: 8px;
      margin-bottom: 16px;
      border-radius: 4px;
      overflow: hidden;
  }
  #progress-bar {
      width: 0%;
      height: 100%;
      background-color: #ededed;
      transition: width 0.3s ease;
  }
  
  /* Question Content Styling */
  .question-content {
      font-size: 1.1rem;
      line-height: 1.6;
      color: #2D3436;
      margin-bottom: 20px;
      font-weight: 400;
      display: flex;
  }
  
  /* Option Button Styling */
  .option-button {
      padding: 16px 24px;
      font-size: 1.1rem;
      color: #2D3436;
      background-color: #F8F9FA;
      border: 1px solid transparent;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .option-button:hover {
      background-color: #f0f7ff;
      transform: translateX(4px);
  }
  
  .option-button.selected {
      border-color: #007BFF;
      background-color: #e0f0ff;
  }
  
  .option-button.correct {
      background-color: #E3FCF4;
      border-color: #28C76F;
  }
  
  .option-button.incorrect {
      background-color: #FFE5E5;
      border-color: #EA5455;
  }
  
  /* Redesigned Dark Mode Styles */
  body.dark-mode {
      background-color: #313131;
      color: #f0f6fc;
  }

  body.dark-mode .start-screen {
      background: #313131;
  }

  body.dark-mode .start-title {
      background: linear-gradient(135deg, #58a6ff 0%, #f0f6fc 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      /* Ensure font-family inherits or redeclare if needed */
      font-family: "Playfair Display", "YuWeiShuFaYunMoFanTi", "source-han-serif-tc", "Noto Serif TC", "PMingLiU", "SimSun", serif;
  }

  body.dark-mode .select-button {
      background-color: #2a2a2a;
      color: #f0f6fc;
      border: 2px solid #404040;
  }

  body.dark-mode .select-button:hover,
  body.dark-mode .select-button.selected {
      background-color: #363636;
      color: #f0f6fc;
      border-color: #58a6ff;
      box-shadow: 0 4px 12px rgba(88, 166, 255, 0.2);
  }

  body.dark-mode .back-button {
      color: #8b949e;
  }

  body.dark-mode .back-button:hover, .back-button.selected {
      color: #f0f6fc;
  }

  body.dark-mode .start-button {
      background-color: #58a6ff;
      color: #313131;
      border: none;
      box-shadow: 0 4px 12px rgba(88, 166, 255, 0.15);
  }

  body.dark-mode .start-button:hover {
      background-color: #1e40af;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(30, 64, 175, 0.25);
  }

  body.dark-mode .restoreBtn_C3D4 {
      color: #8b949e;
      background-color: transparent;
  }

  body.dark-mode .quiz-container {
      background-color: #313131;
  }

  body.dark-mode .quiz-title {
      color: #f0f6fc;
      /* Ensure font-family inherits or redeclare if needed */
      font-family: "Playfair Display", "YuWeiShuFaYunMoFanTi", "source-han-serif-tc", "Noto Serif TC", "PMingLiU", "SimSun", serif;
  }

  body.dark-mode .progress-item {
      background-color: #2a2a2a;
  }

  body.dark-mode .progress-number-orange {
      color: #f69f25;
  }

  body.dark-mode .progress-number-green {
      color: #238636;
  }

  body.dark-mode .orange-bg {
      background-color: #2a2a2a;
  }

  body.dark-mode .green-bg {
      background-color: #2a2a2a;
  }

  body.dark-mode .question-content {
      color: #f0f6fc;
  }

  body.dark-mode .option-button {
      background-color: #2a2a2a;
      color: #f0f6fc;
      border-color: #404040;
  }

  body.dark-mode .option-button:hover {
      background-color: #363636;
      border-color: #58a6ff;
      transform: translateX(4px);
  }

  body.dark-mode .option-button.selected {
      background-color: #363636;
      border-color: #58a6ff;
  }

  body.dark-mode .option-button.correct {
      background-color: rgba(35, 134, 54, 0.2);
      border-color: #238636;
      color: #f0f6fc;
  }

  body.dark-mode .option-button.incorrect {
      background-color: rgba(248, 81, 73, 0.2);
      border-color: #f85149;
      color: #f0f6fc;
  }

  body.dark-mode .confirm-button {
      background-color: #2a2a2a;
      color: #f0f6fc;
      border: 2px solid #404040;
  }

  body.dark-mode .confirm-button:hover {
      background-color: #313131;
      color: #f0f6fc;
      border-color: #58a6ff;
  }

  body.dark-mode .explanation {
      background-color: #2d2d2d;
      color: #f0f6fc;
  }

  body.dark-mode .next-button {
      background-color: #313131;
      color: #f69f25;
      border: 2px solid #f69f25;
  }

  body.dark-mode .next-button:hover {
      background-color: #f69f25;
      color: #313131;
  }

  body.dark-mode .copyright {
      color: #8b949e;
  }

  body.dark-mode .copyright a {
      color: #8b949e;
  }

  body.dark-mode .copyright a:hover {
      color: #58a6ff;
  }

  /* Original CSS Elements Not Renewed */
  
  /* 新增按鈕容器 */
  .button-row {
      display: flex;                /* 啟用 Flexbox 佈局 */
      flex-wrap: wrap;              /* 允許按鈕換行 */
      gap: 15px;                    /* 設定按鈕之間的間距 */
      justify-content: center;      /* 將按鈕集中對齊 */
      max-width: 80%;               /* 容器最大寬度為90% */
      margin: 0 auto;               /* 使容器在水平居中 */
  }
  
  /* 其他樣式保持不變 */
  .quiz-container {
      display: none;
      flex-direction: column;
      width: 95%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      box-sizing: border-box;
      min-height: 100vh;
      background-color: white; /* 預設淺色模式 */
      transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  .header {
      display: flex;
      justify-content: space-between; /* Distributes space between items */
      align-items: center;
      margin-bottom: 10px;
  }
  
  .header-right {
      display: flex;
      align-items: center;
      gap: 10px; /* Optional: adds space between the button and the image */
  }
  
  .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
  }
  
          .confirm-button {
              margin-top: 20px;
              padding: 8px 18px;
              font-size: 18px;
              background-color: #000;
              color: white;
              border: solid 2px #000;
              border-radius: 15px;
              cursor: pointer;
              align-self: flex-end;
              transition: all 0.3s ease;
              position: relative;
              overflow: hidden;
              font-weight: 600;
              letter-spacing: 0.5px;
              outline: none;
          }
  
          .confirm-button::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(
                  120deg, 
                  transparent, 
                  rgba(255,255,255,0.3), 
                  transparent
              );
              transition: all 0.5s ease;
          }
  
          .confirm-button:hover::before {
              left: 100%;
          }
  
          .confirm-button:hover {
              background-color: white;
              color: #000;
              border: solid 2px #000;
              transform: translateY(-2px);
          }
  
          .confirm-button:active {
              transform: translateY(1px);
              transition: transform 0.1s;
          }
  
  .explanation {
      display: none;
      margin-top: 25px;
      padding: 5px 20px 20px 20px;
      background-color: #f9f9f9;
      border-radius: 20px;
      position: relative;
      color: #000; /* 淺色模式 */
      transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  .explanation-text {
      font-size: 18px;
      margin: 10px 0;
  }
  
          .next-button {
              display: block;
              padding: 10px 20px;
              font-size: 18px;
              background-color: #f9f9f9;
              color: #fc9d38;
              border: solid 2px #fc9d38;
              border-radius: 15px;
              cursor: pointer;
              align-self: flex-start;
              transition: all 0.3s ease;
              position: relative;
              overflow: hidden;
              font-weight: 600;
              letter-spacing: 0.5px;
          }
          .next-button:hover {
              background-color: #fc9d38;
              color: white;
              transform: translateY(-2px);
          }
          .next-button::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(
                  120deg, 
                  transparent, 
                  rgba(255,255,255,0.3), 
                  transparent
              );
              transition: all 0.6s;
          }
          .next-button:hover::before {
              left: 100%;
          }
          .next-button:active {
              transform: scale(0.95);
          }
  
  .copyright {
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      color: #a9a9a9; /* 淺灰色 */
      transition: color 0.3s ease;
  }
  
  .copyright a {
      color: #a9a9a9;
      text-decoration: none;
      transition: color 0.3s ease;
  }
  
  .copyright a:hover {
      text-decoration: underline;
  }
  
  /* 模態窗口樣式 */
  /* 自訂模態窗口樣式 */
  .modal {
      display: none; /* 預設隱藏 */
      position: fixed; 
      z-index: 2000; /* 確保在最上層，超過頂部按鈕 */
      left: 0;
      top: 0;
      width: 100%; 
      height: 100%; 
      overflow: auto; 
      backdrop-filter: blur(5px);
      background-color: rgba(0, 0, 0, 0.4); /* 半透明背景 */
      justify-content: center;
      align-items: center;
      transition: background-color 0.3s ease;
  }
  
.modal-content {
    background-color: #ffffff;
    padding: 25px 30px;
    border-radius: 12px;
    text-align: center;
    max-width: 400px;
    width: 75%;
    font-size: 1.1rem;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, color 0.3s ease;
    position: relative;
}
  
  .modal-confirm-button {
    margin-top: 20px;
      padding: 10px 25px;
      font-size: 1rem;
      background-color: #000;
      color: #ffffff;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: background-color 0.3s ease, transform 0.3s ease;
  }
  
  .modal-confirm-button:hover {
      background-color: #111;
      transform: scale(1.05);
  }

.modal-cancel-button {
    margin-top: 20px;
  padding: 10px 25px;
  font-size: 1rem;
  background-color: #dc3545;
  color: #ffffff;
  border: none;
  border-radius: 15px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.3s ease;
}
.modal-cancel-button:hover {
  background-color: #b52a3d;
  transform: scale(1.05);
}
  
  /* 深色模式下的模態窗口 */
  body.dark-mode .modal-content {
      background-color: #2a2a2a;
      color: #e0e0e0;
  }
  
  body.dark-mode .modal-confirm-button {
      background-color: #404040;
      color: #ffffff;
  }
  
  body.dark-mode .modal-confirm-button:hover {
      background-color: #313131;
      color: #ffffff;
  }
  
  body.dark-mode .modal-content {
      background-color: rgba(30,30,30,0.8);
      color: #ffffff;
  }
  
  body.dark-mode .modal-confirm-button {
      background-color: #2d2d2d;
      color: #ffffff;
      border: 2px solid #404040;
  }
  
  body.dark-mode .modal-confirm-button:hover {
      background-color: #000;
      color: #ffffff;
  }
  
  /* Container for Next and Copy buttons */
  .explanation-buttons {
      display: flex;
      justify-content: space-between; /* Distributes space between items */
      align-items: center;
      width: 100%;
      box-sizing: border-box;
  }
  
  /* Style for the Copy text */
  .copy-text {
      /*padding: 0px 15px;*/
      color: lightgray;
      cursor: pointer;
      font-size: 18px;
  }
  
  .copy-text:hover {
      text-decoration: underline;
  }
  
  /* Adjustments for dark mode */
  body.dark-mode .copy-text {
      color: #888888;
  }
  
  .language-button {
      color: #cecece;
      border: none;
      /* padding: 10px 20px;
      margin: 5px; */
      background-color: transparent;
      cursor: pointer;
      transition: color 0.3s;
  }
  
  .language-button:hover {
      color: #adadad;
  }
  
  .separator {
      color: #cecece;
  }

  
  .button-container {
      position: relative;
      width: 30px;
      height: 30px;
  }
  
  /* Dark mode adjustments */
  body.dark-mode .expandable-frame {
      background-color: #2a2a2a;
      border-color: #404040;
  }
  
  body.dark-mode .logout-button {
      color: #cecece;
  }
  
  body.dark-mode .logout-button:hover {
      color: #121212;
      background-color: #cecece;
  }
  
  @media (min-width: 1024px) {
      .language {
          position: absolute;
          bottom: 25px;
      }
  }
  
  /* Responsive Design */
  @media (max-width: 768px) {
      .start-title {
          font-size: 3rem;
      }
      
      .select-button {
          font-size: 0.9rem;
          padding: 8px 16px;
      }
  
      #WeeGPTInputSection {
          margin: 0px 0px 20px 0px;
      }
  }
  
  #copy-btn {
      cursor: pointer;
  }
  
  
  #WeeGPTInputSection {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      background-color: #f9f9fc;
      border-radius: 24px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      border: 1px solid #e6e6eb;
      transition: all 0.3s ease;
  }
  
  #WeeGPTInputSection:focus-within {
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
      transform: translateY(-3px);
  }
  
  #WeeGPTInputSection input {
      flex-grow: 1;
      padding: 15px 10px 15px 20px;
      z-index: 2;
      border: none;
      font-size: 16px;
      color: #2c2c3a;
      outline: none;
      background-color: transparent;
      transition: background-color 0.3s ease;
      width: 0;
  }
  
  #WeeGPTInputSection textarea::placeholder {
      color: #a0a0b3;
      transition: color 0.3s ease;
  }
  
  #WeeGPTInputSection textarea:focus::placeholder {
      color: #c0c0d0;
  }
  
  #WeeGPTInputSection button {
              width: 75px;
              height: 40px;
              background: linear-gradient(156deg, #006dff, #ff0909);;
              color: white;
              border: none;
              font-weight: 600;
              font-size: 16px;
              cursor: pointer;
              transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
              margin-right: 8px;
              border-radius: 16px;
              letter-spacing: 0.5px;
              position: relative;
              box-shadow: 0 4px 15px rgba(0, 130, 200, 0.3);
          }
  
          #WeeGPTInputSection button::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent);
              transition: all 0.5s ease;
          }
  
          #WeeGPTInputSection button:hover::before {
              left: 100%;
          }
  
          #WeeGPTInputSection button:hover {
              transform: scale(1.1) rotate(3deg);
              box-shadow: 0 6px 20px rgba(0, 130, 200, 0.4);
          }
  
          #WeeGPTInputSection button:active {
              transform: scale(0.95);
              box-shadow: 0 2px 10px rgba(0, 130, 200, 0.2);
          }
  
  
  
  /* Restore */
  
    /* Restore Button Styling */
    .restoreBtn_C3D4 {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 5px 20px;
      font-size: 14px;
      color: #3b3c56;
      background-color: #ffffff50;
      border: 2px solid #3b3c56;
      border-radius: 50px;
      cursor: pointer;
      overflow: hidden;
      transition: background-color 0.6s ease, color 0.6s ease;
      margin-top: 10px;
    }
  
    /* Text Styling */
    .restoreBtn_C3D4 .btnText_E5F6 {
      position: relative;
      z-index: 2;
      transition: transform 0.6s ease, opacity 0.6s ease;
    }
  
    /* Long Thin Arrow Styling */
    .restoreBtn_C3D4::after {
      content: '⟵';
      position: absolute;
      top: -3px;
      font-size: 24px;
      font-weight: bold;
      color: #ffffff;
      opacity: 0;
      transition: opacity 0.6s ease, transform 0.6s ease;
      transform: translateX(-20px);
    }
  
    /* Hover Effects */
    .restoreBtn_C3D4:hover {
      background-color: #3b3c56;
      color: #ffffff;
    }
  
    .restoreBtn_C3D4:hover .btnText_E5F6 {
      transform: translateX(-50px);
      opacity: 0;
    }
  
    .restoreBtn_C3D4:hover::after {
      opacity: 1;
      transform: translateX(0);
    }
  
    .option-button.missing {
      border-color: #FFA500;
      background-color: #FFF3CD;
      }
  
      .multi-label {
          font-size: 0.6rem;
          font-weight: 600;
          color: #ffa500;
          background-color: #ffa50047;
          border-radius: 8px;
          padding: 0px 4px;
          width: 9px;
          height: 16px;
      }
  
  
  @keyframes moveLight {
      from { left: -50%; }
      to { left: 100%; }
  }
  
  .typing-effect {
      position: relative;
      overflow: hidden;
  }
  
  .typing-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: -50%;
      height: 100%;
      width: 60%;
      background: linear-gradient(to right, transparent, rgba(249, 249, 249 ,0.7), transparent);
      animation: moveLight 2s linear infinite;
  }

  body.dark-mode .typing-effect::before {
      background: linear-gradient(to right, transparent, rgba(45, 45, 45, 0.7), transparent);
  }

/* Top Left Controls Container */
.top-left-controls {
    position: absolute;
    top: 20px;
    left: 20px;
    display: flex;
    align-items: center;
    gap: 10px; /* Space between add button and shuffle toggle */
    z-index: 1001; /* Ensure it's above other elements if necessary */
}

/* Add-Quiz Button - remove absolute positioning if it's now controlled by flex container */
.add-button {
  /* position: absolute; */ /* Removed as it's now in a flex container */
  /* top: 20px; */ /* Removed */
  /* left: 20px; */ /* Removed */
  width: 32px;
  height: 32px;
  font-size: 24px;
  line-height: 28px; /* Adjust for vertical centering if needed */
  text-align: center;
  background-color: #000;
  color: #fff;
  border: none;
  border-radius: 16px; /* Circular */
  cursor: pointer;
  /* z-index: 1000; */ /* z-index now on parent .top-left-controls */
  display: flex;
  justify-content: center;
  align-items: center;
}
.add-button:hover {
  background-color: #333;
}

/* Remove old Shuffle Toggle Button styles if they exist */
/* .shuffle-toggle-button { ... } */
/* .shuffle-toggle-button:hover { ... } */
/* .shuffle-toggle-button.active { ... } */

/* Shuffle Slider Styles */
.shuffle-slider-track {
    width: 44px; 
    height: 24px; 
    background-color: #ccc;
    border-radius: 12px; 
    position: relative;
    cursor: pointer;
    transition: background-color 0.3s ease;
    display: flex;
    align-items: center; 
    box-sizing: border-box; /* Ensure padding doesn't add to width/height */
}

.slider-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 13px; /* Adjust icon size as needed */
    line-height: 1;
    color: white; /* Icon color, contrasts with both track states */
    z-index: 0; /* Behind the knob */
    transition: left 0.3s ease, right 0.3s ease, opacity 0.3s ease; /* For smooth transition if needed */
}


.shuffle-slider-knob {
    width: 20px; 
    height: 20px; 
    background-color: white;
    border-radius: 50%; 
    position: absolute;
    top: 2px; 
    left: 2px; 
    transition: transform 0.3s ease;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    z-index: 1; /* Knob is above the icon span */
}

/* Default state: Ordered (Arrow icon → on the right, knob on the left) */
.shuffle-slider-track .slider-icon {
    right: 5px; /* Position icon in the right part of the track */
    left: auto;
}
.shuffle-slider-track .slider-icon::before {
    content: '→'; /* Arrow icon */
}

.shuffle-slider-track.active {
    background-color: #007BFF; /* Color when active (Fixed Order) */
}

/* Active state: Random (Shuffle icon ⇄ on the left, knob on the right) */
.shuffle-slider-track.active .slider-icon {
    left: 5px; /* Position icon in the left part of the track */
    right: auto;
}
.shuffle-slider-track.active .slider-icon::before {
    content: '⇄'; /* Shuffle icon */
}

.shuffle-slider-track.active .shuffle-slider-knob {
    transform: translateX(20px); 
}


/* Google Sign-In Button (restyled to match select-button) */
.sign-in-button {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 4px 6px;
    font-size: 1rem;
    background-color: #FFFFFF;
    color: #2D3436;
    border: 2px solid #2D3436;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
    font-family: 'Poppins', sans-serif;
}
.sign-in-button:hover, .sign-in-button.selected {
    background-color: #2D3436;
    color: #FFFFFF;
    transform: translateY(-2px);
}

/* Modern Theme Toggle Button */
.theme-toggle-button {
    position: absolute;
    top: 20px;
    right: 80px;
    width: 60px;
    height: 32px;
    background: transparent;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    padding: 0;
    overflow: visible;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
    display: flex;
    align-items: center;
    justify-content: center;
}

.theme-toggle-track {
    position: relative;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #E0F6FF 0%, #B3E5FC 100%);
    border-radius: 16px;
    border: 2px solid rgba(135, 206, 235, 0.4);
    box-shadow:
        0 4px 12px rgba(135, 206, 235, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

.theme-toggle-thumb {
    position: absolute;
    top: 2px;
    left: 2px;
    width: 24px;
    height: 24px;
    background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow:
        0 3px 8px rgba(0,0,0,0.2),
        0 1px 2px rgba(0,0,0,0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 2;
    transform-origin: center;
}

.theme-icon {
    width: 16px;
    height: 16px;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
    transform-origin: center;
}

.theme-toggle-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

/* Sun Rays Animation */
.sun-rays {
    position: absolute;
    top: 6px;
    right: 8px;
    width: 12px;
    height: 12px;
    opacity: 0.8;
    background: radial-gradient(circle, #FFD700 0%, #FFA500 50%, transparent 100%);
    border-radius: 50%;
    animation: sunGlow 3s ease-in-out infinite;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
}

.sun-rays::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border-radius: 50%;
    background: radial-gradient(circle, transparent 30%, rgba(255, 215, 0, 0.3) 70%);
    animation: sunRays 4s linear infinite;
}

/* Moon with Stars */
.moon-craters {
    position: absolute;
    top: 6px;
    left: 8px;
    width: 12px;
    height: 12px;
    opacity: 0;
    background: radial-gradient(circle at 30% 30%, #F5F5F5 0%, #E8E8E8 40%, #D3D3D3 70%, transparent 100%);
    border-radius: 50%;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 6px rgba(245, 245, 245, 0.8);
}

.moon-craters::before {
    content: '';
    position: absolute;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    background:
        radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.9) 1px, transparent 2px),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.8) 1px, transparent 2px),
        radial-gradient(circle at 60% 70%, rgba(255, 255, 255, 0.7) 1px, transparent 2px);
    animation: twinkle 3s ease-in-out infinite;
}

/* Hover Effects */
.theme-toggle-button:hover .theme-toggle-track {
    box-shadow:
        0 6px 20px rgba(135, 206, 235, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
    transform: scale(1.03);
}

.theme-toggle-button:hover .theme-toggle-thumb {
    transform: scale(1.15);
    box-shadow:
        0 4px 12px rgba(0,0,0,0.25),
        0 2px 4px rgba(0,0,0,0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.theme-toggle-button:active .theme-toggle-track {
    transform: scale(0.97);
}

/* Dark Mode State */
.theme-toggle-button.dark-mode-active .theme-toggle-track {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow:
        0 4px 12px rgba(0,0,0,0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.theme-toggle-button.dark-mode-active .theme-toggle-thumb {
    left: 30px;
    background: linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%);
    box-shadow:
        0 3px 8px rgba(0,0,0,0.6),
        0 1px 2px rgba(0,0,0,0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.theme-toggle-button.dark-mode-active .sun-rays {
    opacity: 0;
    animation: none;
}

.theme-toggle-button.dark-mode-active .moon-craters {
    opacity: 0.9;
}

.theme-toggle-button.dark-mode-active .theme-icon {
    filter: brightness(1.3) drop-shadow(0 1px 3px rgba(0,0,0,0.3));
    transform: rotate(180deg) scale(1.1);
}

.theme-toggle-button:not(.dark-mode-active) .theme-icon {
    transform: rotate(0deg) scale(1);
}

/* Transition Effects */
.theme-toggle-button.dark-mode-active:hover .theme-toggle-thumb {
    transform: scale(1.15);
    box-shadow:
        0 4px 12px rgba(0,0,0,0.7),
        0 2px 4px rgba(0,0,0,0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Accessibility */
.theme-toggle-button:focus-visible {
    outline: 2px solid #87CEEB;
    outline-offset: 3px;
}

/* Advanced Animation Keyframes */
@keyframes sunGlow {
    0%, 100% {
        opacity: 0.8;
        transform: scale(1);
        box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
    }
    50% {
        opacity: 1;
        transform: scale(1.2);
        box-shadow: 0 0 16px rgba(255, 215, 0, 0.9), 0 0 24px rgba(255, 215, 0, 0.4);
    }
}

@keyframes sunRays {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

@keyframes twinkle {
    0%, 100% {
        opacity: 0.7;
        transform: scale(1);
    }
    25% {
        opacity: 1;
        transform: scale(1.2);
    }
    50% {
        opacity: 0.8;
        transform: scale(0.9);
    }
    75% {
        opacity: 0.9;
        transform: scale(1.1);
    }
}


/* Login Modal Styles */
.login-modal {
  display: none;
  position: fixed;
  z-index: 2000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  backdrop-filter: blur(5px);
  background-color: rgba(0,0,0,0.4);
  justify-content: center; align-items: center;
}
.login-modal-content {
  background-color: #ffffff;
  padding: 25px 30px;
  border-radius: 12px;
  max-width: 400px; width: 90%;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2);
  font-family: 'Poppins', sans-serif;
  position: relative;
}
.login-modal-content h3 {
  margin-bottom: 20px;
  font-size: 1.5rem;
  color: #2D3436;
}
.login-input {
  width: 100%;
  padding: 10px 15px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 1rem;
  box-sizing: border-box;
}
.login-button {
  width: 100%;
  padding: 12px;
  font-size: 1rem;
  background-color: #000;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-bottom: 10px;
}
.login-button:hover {
  background-color: #111;
  transform: translateY(-1px);
}
.login-error {
  color: #cc4e00;
  font-size: 0.9rem;
  margin-bottom: 10px;
}
.modal-close {
  position: absolute;
  top: 12px;
  right: 16px;
  font-size: 1.5rem;
  color: #888;
  cursor: pointer;
  z-index: 1001;
  transition: color 0.2s ease;
}
.modal-close:hover {
  color: #333;
}

/* Debug Modal Styles */
#popupWindow {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0; top: 0;
    width: 100%; height: 100%;
    backdrop-filter: blur(5px);
    background-color: rgba(0, 0, 0, 0.4);
    justify-content: center;
    align-items: center;
}
#popupWindow .content {
    background-color: #ffffff;
    color: #2D3436;
    padding: 30px;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, color 0.3s ease;
    font-family: 'Poppins', sans-serif;
    position: relative;
}
#popupWindow #closeButton {
    position: absolute;
    top: 12px; right: 16px;
    font-size: 1.5rem;
    color: #888888;
    cursor: pointer;
    transition: color 0.2s ease;
}
#popupWindow #closeButton:hover {
    color: #333333;
}
#popupWindow .content .non-editable {
    font-weight: 600;
    margin-top: 12px;
    color: #262b34;
}
#popupWindow .content .editable {
    width: 100%;
    min-height: 40px;
    margin: 6px 0 12px 0;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
}
#popupWindow .content .editable:focus {
    outline: none;
    border-color: #007BFF;
    background-color: #f0f7ff;
}
#popupWindow #sendButton {
    padding: 10px 20px;
    font-size: 1rem;
    background-color: #000000;
    color: #ffffff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(74,58,222,0.15);
    transition: background-color 0.3s ease, transform 0.2s ease;
    margin-top: 12px;
    font-weight: 500;
}
#popupWindow #sendButton:hover {
    background-color: #111111;
    transform: translateY(-2px);
}

/* End Screen Layout */
.end-message {
    text-align: center;
    font-size: 1.2rem;
    margin-top: 20px;
    color: #2D3436;
    font-weight: 500;
}
.end-buttons {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}
.end-buttons .select-button {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto !important;
    min-width: 150px;
    max-width: 200px;
    padding: 12px 0;
}

/* Center end screen vertically and horizontally */
.quiz-container.end-screen {
    display: flex !important;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Overlay for end screen when restarting quiz */
.end-screen-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Ensure custom alert appears above login modal */
#customAlert {
    z-index: 1100 !important;
}

/* Star buttons */
#starQuestion,
#showStarredBtn {
    cursor: pointer;
    width: 24px;
    height: 24px;
}

/* Starred modal styling */
.starred-modal-content {
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    text-align: left;
}

.starred-item {
    border-bottom: 1px solid #ddd;
    padding: 8px 0;
}
.starred-item button {
    margin-top: 4px;
}

.starred-question {
    font-weight: 400;
    margin-bottom: 4px;
}

.starred-source {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 6px;
}

.starred-options div {
    padding-left: 8px;
    margin-bottom: 2px;
}

.starred-explanation {
    background-color: #f9f9f9;
    border-left: 4px solid #000;
    padding: 8px;
    margin-top: 6px;
    border-radius: 4px;
}

.starred-controls {
    display: flex;
    gap: 8px;
    margin-top: 8px;
}

.toggle-explanation-button,
.starred-delete-button {
    padding: 6px 12px;
    font-size: 0.9rem;
    border-radius: 10px;
    cursor: pointer;
}

.toggle-explanation-button {
    display: inline-flex;
    align-items: center;
    background-color: #fff;
    border: 1px solid #ccc;
    color: #333;
}

.toggle-explanation-button .arrow {
    margin-left: 4px;
    font-size: 1rem;
}

.toggle-explanation-button:hover {
    background-color: #f5f5f5;
}

.starred-delete-button {
    background-color: #d9534f;
    color: #fff;
}

.starred-delete-button:hover {
    background-color: #c9302c;
}

body.dark-mode .starred-explanation {
    background-color: #0d1117;
    border-left-color: #58a6ff;
    color: #f0f6fc;
}

body.dark-mode .toggle-explanation-button {
    background-color: #21262d;
    border-color: #30363d;
    color: #f0f6fc;
}

body.dark-mode .toggle-explanation-button:hover {
    background-color: #30363d;
}

body.dark-mode .starred-delete-button {
    background-color: #a33;
}

body.dark-mode .starred-delete-button:hover {
    background-color: #922;
}

/* Progress Bar Challenge Animations */
@keyframes pulse {
  0% { transform: scaleY(1); }
  50% { transform: scaleY(1.5); }
  100% { transform: scaleY(1); }
}

@keyframes correctPulse {
  0% { transform: scaleY(1); box-shadow: 0 0 0 0 rgba(24, 174, 121, 0.7); }
  50% { transform: scaleY(1.8); box-shadow: 0 0 0 4px rgba(24, 174, 121, 0); }
  100% { transform: scaleY(1); box-shadow: 0 0 0 0 rgba(24, 174, 121, 0); }
}

@keyframes wrongPulse {
  0% { transform: scaleY(1); box-shadow: 0 0 0 0 rgba(204, 78, 0, 0.8); }
  50% { transform: scaleY(1.3); box-shadow: 0 0 0 3px rgba(204, 78, 0, 0); }
  100% { transform: scaleY(1); box-shadow: 0 0 0 0 rgba(204, 78, 0, 0); }
}

@keyframes glow {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.5); }
  100% { filter: brightness(1); }
}

/* New challenging animations */
@keyframes shake {
  0%, 100% { transform: translateX(0) scaleY(1); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-3px) scaleY(1.1); }
  20%, 40%, 60%, 80% { transform: translateX(3px) scaleY(1.1); }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0) scaleY(1); }
  40% { transform: translateY(-5px) scaleY(1.2); }
  60% { transform: translateY(-2px) scaleY(1.1); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.progress-bar {
  position: absolute;
  top: 0;
  bottom: 0;
  transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* More dynamic easing */
  border-radius: 3px;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.3);
  overflow: hidden;
  background-size: 200% 100%; /* For shimmer */
  animation: shimmer 3s linear infinite; /* Continuous subtle challenge shimmer */
}

.progress-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
  opacity: 0.6;
  pointer-events: none;
}

.progress-bar.animating {
  animation: pulse 0.6s ease-out, shimmer 1s linear infinite;
}

.progress-bar.correct-animating {
  animation: correctPulse 0.8s ease-out, glow 1s ease-out, bounce 0.8s ease-out;
}

.progress-bar.wrong-animating {
  animation: wrongPulse 0.8s ease-out, shake 0.5s ease-in-out;
}

.correct-bar {
  background: linear-gradient(90deg, #18AE79 0%, #4CAF50 25%, #66BB6A 50%, #4CAF50 75%, #18AE79 100%);
  background-size: 300% 100%;
  animation: lavaFlow 6s ease-in-out infinite;
  left: 0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.correct-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
  pointer-events: none;
}

.wrong-bar {
  background: linear-gradient(90deg, #cc4e00 0%, #ff5722 25%, #ff8a65 50%, #ff5722 75%, #cc4e00 100%);
  background-size: 300% 100%;
  animation: lavaFlow 6s ease-in-out infinite;
  right: 0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.wrong-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
  pointer-events: none;
}

/* Dark mode progress bar animations */
body.dark-mode .progress-bar {
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
}

body.dark-mode .correct-bar {
  background: linear-gradient(90deg, #238636 0%, #2ea043 25%, #39d353 50%, #2ea043 75%, #238636 100%);
  background-size: 300% 100%;
  animation: lavaFlow 6s ease-in-out infinite;
}

body.dark-mode .wrong-bar {
  background: linear-gradient(90deg, #f85149 0%, #fa8c89 25%, #ffacb1 50%, #fa8c89 75%, #f85149 100%);
  background-size: 300% 100%;
  animation: lavaFlow 6s ease-in-out infinite;
}

body.dark-mode .progress-bars {
  background-color: #21262d;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
}

body.dark-mode .theme-toggle-button.dark-mode-active .theme-toggle-track {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-color: rgba(88, 166, 255, 0.3);
    box-shadow: 0 4px 12px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

body.dark-mode .theme-toggle-button.dark-mode-active .theme-toggle-thumb {
    background: linear-gradient(135deg, #475569 0%, #334155 100%);
    box-shadow: 0 3px 8px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

body.dark-mode .file-drop-zone {
    border-color: #404040;
    color: #f0f6fc;
    background-color: #2a2a2a;
}
body.dark-mode .file-drop-zone.dragover {
    border-color: #58a6ff;
    background-color: #1e3a8a;
}

/* Dark Mode - Fillblank Elements */
body.dark-mode .fillblank-input {
    background-color: #2a2a2a;
    border-color: #404040;
    color: #f0f6fc;
}
body.dark-mode .fillblank-input:focus {
    border-color: #58a6ff;
    background-color: #313131;
}
body.dark-mode .fillblank-input.correct {
    border-color: #238636;
    background-color: rgba(35, 134, 54, 0.1);
}
body.dark-mode .fillblank-input.incorrect {
    border-color: #f85149;
    background-color: rgba(248, 81, 73, 0.1);
}

/* Dark Mode - Progress Container */
body.dark-mode .progress-container {
    color: #ffffff;
}
body.dark-mode .progress-counts {
    color: #f0f6fc;
}
body.dark-mode .progress-bars {
    background-color: #21262d;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
}
body.dark-mode .count-text,
body.dark-mode .count-number {
    color: #f0f6fc;
}

/* Dark Mode - Top Left Controls */
body.dark-mode .top-left-controls {
    color: #ffffff;
}

/* Dark Mode - Add Button */
body.dark-mode .add-button {
    background-color: #363636;
    color: #f0f6fc;
}
body.dark-mode .add-button:hover {
    background-color: #58a6ff;
    color: #313131;
}

/* Dark Mode - Shuffle Slider */
body.dark-mode .shuffle-slider-track {
    background-color: #404040;
}
body.dark-mode .shuffle-slider-track.active {
    background-color: #58a6ff;
}
body.dark-mode .shuffle-slider-knob {
    background-color: #f0f6fc;
}

/* Dark Mode - Sign In Button */
body.dark-mode .sign-in-button {
    background-color: #2a2a2a;
    color: #f0f6fc;
    border: 2px solid #404040;
}
body.dark-mode .sign-in-button:hover,
body.dark-mode .sign-in-button.selected {
    background-color: #363636;
    color: #f0f6fc;
    border-color: #58a6ff;
}

/* Dark Mode - Login Modal */
body.dark-mode .login-modal-content {
    background-color: #2a2a2a;
    color: #f0f6fc;
}
body.dark-mode .login-modal-content h3 {
    color: #f0f6fc;
}
body.dark-mode .login-input {
    background-color: #363636;
    border-color: #404040;
    color: #f0f6fc;
}
body.dark-mode .login-input:focus {
    border-color: #58a6ff;
    background-color: #313131;
}
body.dark-mode .login-button {
    background-color: #363636;
    color: #f0f6fc;
}
body.dark-mode .login-button:hover {
    background-color: #58a6ff;
    color: #313131;
}
body.dark-mode .login-error {
    color: #f85149;
}
body.dark-mode .modal-close {
    color: #8b949e;
}
body.dark-mode .modal-close:hover {
    color: #f0f6fc;
}

body.dark-mode #WeeGPTInputSection {
    background-color: #2a2a2a;
    border-color: #404040;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}
body.dark-mode #WeeGPTInputSection:focus-within {
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
}
body.dark-mode #WeeGPTInputSection input {
    color: #f0f6fc;
}
body.dark-mode #WeeGPTInputSection textarea::placeholder,
body.dark-mode #WeeGPTInputSection input::placeholder {
    color: #8b949e;
}
body.dark-mode #WeeGPTInputSection textarea:focus::placeholder,
body.dark-mode #WeeGPTInputSection input:focus::placeholder {
    color: #dddddd;
}

body.dark-mode #WeeGPTInputSection button {
    background: linear-gradient(156deg, #1e40af, #dc2626);
    box-shadow: 0 4px 15px rgba(88, 166, 255, 0.3);
}

body.dark-mode #WeeGPTInputSection button:hover {
    box-shadow: 0 6px 20px rgba(88, 166, 255, 0.4);
}

body.dark-mode .restoreBtn_C3D4 {
    color: #8b949e;
    border: 2px solid #8b949e;
    background-color: rgba(139, 148, 158, 0.1);
}

body.dark-mode .restoreBtn_C3D4:hover {
    color: #f0f6fc;
    border-color: #f0f6fc;
    background-color: rgba(240, 246, 252, 0.1);
}

body.dark-mode #popupWindow {
    background-color: rgba(49, 49, 49, 0.8);
}

body.dark-mode #popupWindow .content {
    background-color: #2a2a2a;
    color: #f0f6fc;
}

body.dark-mode #popupWindow #closeButton {
    color: #8b949e;
}

body.dark-mode #popupWindow #closeButton:hover {
    color: #f0f6fc;
}

body.dark-mode #popupWindow .content .non-editable {
    color: #f0f6fc;
}

body.dark-mode #popupWindow .content .editable {
    background-color: #363636;
    border-color: #404040;
    color: #f0f6fc;
}

body.dark-mode #popupWindow .content .editable:focus {
    border-color: #58a6ff;
    background-color: #313131;
}

body.dark-mode #popupWindow #sendButton {
    background-color: #363636;
    color: #f0f6fc;
    border: none;
    box-shadow: 0 4px 12px rgba(88, 166, 255, 0.15);
}

body.dark-mode #popupWindow #sendButton:hover {
    background-color: #58a6ff;
    color: #313131;
}

body.dark-mode .end-message {
    color: #f0f6fc;
}

body.dark-mode .end-buttons .select-button {
    background-color: #2a2a2a;
    color: #f0f6fc;
    border-color: #404040;
}

body.dark-mode .end-buttons .select-button:hover, .select-button.selected {
    background-color: #363636;
    color: #f0f6fc;
    border-color: #58a6ff;
}

body.dark-mode .starred-modal-content {
    background-color: #2a2a2a;
    color: #f0f6fc;
}

body.dark-mode .starred-item {
    border-bottom-color: #404040;
}

body.dark-mode .starred-source {
    color: #8b949e;
}

body.dark-mode .starred-explanation {
    background-color: #313131;
    border-left-color: #58a6ff;
    color: #f0f6fc;
}

body.dark-mode .starred-controls {
    /* If this is empty, remove the entire rule */
}

body.dark-mode .toggle-explanation-button {
    background-color: #363636;
    border-color: #404040;
    color: #f0f6fc;
}

body.dark-mode .toggle-explanation-button:hover {
    background-color: #404040;
}

body.dark-mode .starred-delete-button {
    background-color: #f85149;
    color: #f0f6fc;
}

body.dark-mode .starred-delete-button:hover {
    background-color: #da3633;
}

body.dark-mode .progress-bars {
    background-color: #363636;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
}

body.dark-mode .correct-bar {
    background: linear-gradient(90deg, #238636 0%, #2ea043 25%, #39d353 50%, #2ea043 75%, #238636 100%);
    background-size: 300% 100%;
    animation: lavaFlow 6s ease-in-out infinite;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

body.dark-mode .wrong-bar {
    background: linear-gradient(90deg, #f85149 0%, #fa8c89 25%, #ffacb1 50%, #fa8c89 75%, #f85149 100%);
    background-size: 300% 100%;
    animation: lavaFlow 6s ease-in-out infinite;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

body.dark-mode .progress-bar {
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
}

body.dark-mode .theme-toggle-button.dark-mode-active .theme-toggle-track {
    background: linear-gradient(135deg, #2a2a2a 0%, #313131 100%);
    border-color: rgba(88, 166, 255, 0.3);
    box-shadow: 0 4px 12px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

body.dark-mode .theme-toggle-button.dark-mode-active .theme-toggle-thumb {
    background: linear-gradient(135deg, #404040 0%, #363636 100%);
    box-shadow: 0 3px 8px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

body.dark-mode .file-drop-zone {
    border-color: #404040;
    color: #f0f6fc;
    background-color: #2a2a2a;
}

body.dark-mode .file-drop-zone.dragover {
    border-color: #58a6ff;
    background-color: #1e3a8a;
}

body.dark-mode .fillblank-input {
    background-color: #2a2a2a;
    border-color: #404040;
    color: #f0f6fc;
}

body.dark-mode .fillblank-input:focus {
    border-color: #58a6ff;
    background-color: #313131;
}

body.dark-mode .fillblank-input.correct {
    border-color: #238636;
    background-color: rgba(35, 134, 54, 0.1);
}

body.dark-mode .fillblank-input.incorrect {
    border-color: #f85149;
    background-color: rgba(248, 81, 73, 0.1);
}

body.dark-mode .progress-container {
    color: #ffffff;
}

body.dark-mode .progress-counts {
    color: #f0f6fc;
}

body.dark-mode .count-text,
body.dark-mode .count-number {
    color: #f0f6fc;
}

body.dark-mode .top-left-controls {
    color: #ffffff;
}

body.dark-mode .add-button {
    background-color: #363636;
    color: #f0f6fc;
}

body.dark-mode .add-button:hover {
    background-color: #58a6ff;
    color: #313131;
}

body.dark-mode .shuffle-slider-track {
    background-color: #404040;
}

body.dark-mode .shuffle-slider-track.active {
    background-color: #58a6ff;
}

body.dark-mode .shuffle-slider-knob {
    background-color: #f0f6fc;
}

body.dark-mode .sign-in-button {
    background-color: #2a2a2a;
    color: #f0f6fc;
    border: 2px solid #404040;
}

body.dark-mode .sign-in-button:hover,
body.dark-mode .sign-in-button.selected {
    background-color: #363636;
    color: #f0f6fc;
    border-color: #58a6ff;
}

body.dark-mode #WeeGPTInputSection button:hover::before {
    content: '';
    position: absolute;
    top: 0;
    left: 100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        120deg, 
        transparent, 
        rgba(44, 44, 58, 0.3), 
        transparent
    );
    transition: all 0.5s ease;
}

body.dark-mode #WeeGPTInputSection button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(120deg, transparent, rgba(44, 44, 58, 0.3), transparent);
    transition: all 0.5s ease;
}

.origin-display {
    font-size: 0.8rem;
    color: #888;
    margin: 8px 0;
    text-align: left;
}

body.dark-mode .origin-display {
    color: #8b949e;
}

.multi-label {
    font-size: 0.6rem;
    font-weight: 600;
    color: #ffa500;
    background-color: #ffa50047;
    border-radius: 8px;
    padding: 0px 4px;
    width: 9px;
    height: 16px;
}

@keyframes moveLight {
    from { left: -50%; }
    to { left: 100%; }
}

.question-wrapper {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    margin-bottom: 20px;
}

.question-text {
    flex: 1;
    display: block;
}

body.dark-mode .multi-label {
    color: #ffaa00;
    background-color: rgba(255, 170, 0, 0.3);
}

body.dark-mode .question-wrapper {
    gap: 8px;
}
